{% extends "base.html" %}

{% block title %}Capability詳細 - Accel MCP{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb" id="breadcrumb">
    <a href="/dashboard" data-i18n="breadcrumb_home">ホーム</a>
    <span class="breadcrumb-separator">›</span>
    <a href="/mcp-services" data-i18n="mcp_service_list_title">MCPサービス一覧</a>
    <span class="breadcrumb-separator">›</span>
    <a href="#" id="mcp-service-link">MCPサービス</a>
    <span class="breadcrumb-separator">›</span>
    <a href="#" id="apps-link" data-i18n="breadcrumb_app_list">アプリ一覧</a>
    <span class="breadcrumb-separator">›</span>
    <a href="#" id="service-link" data-i18n="breadcrumb_app_detail">アプリ詳細</a>
    <span class="breadcrumb-separator">›</span>
    <a href="#" id="capabilities-link" data-i18n="breadcrumb_capabilities">Capabilities</a>
    <span class="breadcrumb-separator">›</span>
    <span class="breadcrumb-current" data-i18n="breadcrumb_capability_detail">Capability詳細</span>
</nav>
{% endblock %}

{% block content %}
<div class="page-title">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2 data-i18n="capability_detail_title">Capability 詳細</h2>
            <p data-i18n="capability_detail_desc">Capabilityの詳細情報</p>
        </div>
        <a href="#" id="edit-link" class="btn btn-primary" data-i18n="button_edit">編集</a>
    </div>
</div>

<div id="capability-detail" class="detail-card"></div>

<!-- Permissions Section -->
<div class="detail-card" id="permissions-section" style="display: none;">
    <h3 data-i18n="permissions_tab">権限管理</h3>
    <div style="margin-bottom: 15px;">
        <button onclick="showAddPermissionModal()" class="btn btn-secondary" data-i18n="permission_add">権限を追加</button>
    </div>
    <div id="permissions-list">
        <p data-i18n="permissions_empty">権限が設定されていません</p>
    </div>
</div>

<!-- Add Permission Modal -->
<div id="add-permission-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 data-i18n="permission_add">権限を追加</h3>
            <button onclick="closeAddPermissionModal()" class="btn-close">×</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label data-i18n="account_name_label">アカウント</label>
                <select id="permission-account-select" class="form-control">
                    <option value="">選択してください</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button onclick="closeAddPermissionModal()" class="btn btn-secondary" data-i18n="button_cancel">キャンセル</button>
            <button onclick="addPermission()" class="btn btn-primary" data-i18n="button_save">保存</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/assets/view/capabilities/detail.js"></script>
{% endblock %}
